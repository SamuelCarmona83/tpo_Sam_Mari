import ImagenMari from "../imagenes/mari.jpeg";
import imagenSamu from "../imagenes/samu.jpeg";
import imagenCorazon from "../imagenes/corazon.png";



let proyectos = [{
    nombre: "Fiesta de cumplea√±os",
    descripcion: "Todos los gastos para la fiesta del fin de semana",
    ID: 0,
    participantes: [0, 1],
    gastos:[
        {
            ID: 0,
            imagen: 'https://img.freepik.com/vector-gratis/muestra-ticket-realista_23-2147938550.jpg',
            descripcion: 'Torta de chocolate',
            monto: 3000,
            usuarioID: 0,
            fecha: "20/09/24"
        },{
            ID: 1,
            imagen: 'https://img.freepik.com/vector-gratis/muestra-ticket-realista_23-2147938550.jpg',
            descripcion: 'Bebidas',
            monto: 5000,
            usuarioID: 1,
            fecha: "21/09/24"
        }
    ],
    pagos: [
        {
            ID: 0,
            imagen: 'https://img.freepik.com/vector-gratis/muestra-ticket-realista_23-2147938550.jpg',
            descripcion: 'Pago a Samuel',
            monto: 500,
            usuarioID: 0,
            fecha: "21/09/24"
        }
    ]
    
    
}, {
    nombre: "Viaje a la costa",
    descripcion: "Llevamos la cuenta de todos los gastos del viaje a la costa",
    ID: 1,
    participantes: [0, 1],
    gastos:[
        {
            ID: 0,
            imagen: 'https://img.freepik.com/vector-gratis/muestra-ticket-realista_23-2147938550.jpg',
            descripcion: 'hotel',
            monto: 30000,
            usuarioID: 1,
            fecha: "16/08/24"
        }
    ],
    pagos: []
}];

let usuarios = [
    {
        ID:0,
        nombre:"mariangel",
        imagen: "https://static.vecteezy.com/system/resources/thumbnails/046/850/555/small/portrait-of-a-smiling-businesswoman-with-glasses-working-on-a-laptop-in-a-modern-office-environment-professional-and-confident-office-worker-photo.jpg",
        deudas:[]
    },
    {
        ID: 1,
        nombre:"Samuel",
        imagen: imagenSamu,
        deudas:[]
    },
    {
        ID: 2,
        nombre:"Jose Alejandro",
        imagen:"",
        deudas:[]
    },
    {
        ID: 3,
        nombre:"Eddymar Orellana",
        imagen: imagenCorazon,
        deudas:[]
    }
];
//      Metodos de Proyecto     //
export async function getProyectos(){
    try{
        // fetching data from the backend
        const resp = await fetch('http//:localhost:8080/api/usuario' + "/")
        const data = await resp.json()
        console.log(data);
        //return data;
        
    }catch(error){
        console.log("Error loading message from backend", error)
    }
    return proyectos;
}

export function getProyectobyID(ID){
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === ID){
            return proyectos[i];
        }
    }
}

export function sacarProyecto(ID){
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === ID){
            proyectos.splice(i , 1);
        }
    }
}

export function agregarProyecto(nombreNuevoProyecto){
    let IDNuevo = proyectos[proyectos.length - 1].ID + 1;
    proyectos.push({
        nombre: nombreNuevoProyecto,
        ID: IDNuevo,
        participantes: [0],
        gastos: [], 
        pagos: []
    });
}

//      Metodos de gastos y pagos       //
export function agregarGasto(datos, proyectoID) {
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === proyectoID){
            datos.ID = proyectos[i].gastos.length;
            proyectos[i].gastos.push(datos)
        }
    }
}

export function agregarPago(datos, proyectoID) {
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === proyectoID){
            datos.ID = proyectos[i].pagos.length;
            proyectos[i].pagos.push(datos)
        }
    }
}

export function borrarGasto(gastoID, proyectoID ){
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === proyectoID){
            let gastos = proyectos[i].gastos
            for (let j = 0; j < gastos.length ; j++) {
                if (gastos[j].ID === gastoID) {
                    console.log(gastos);
                    gastos.splice(j , 1);
                    console.log(gastos);
                }
            }
        }
    }
}

export function borrarPago(pagoID, proyectoID ){
    for (let i = 0; i < proyectos.length ; i++){
        if(proyectos[i].ID === proyectoID){
            let pagos = proyectos[i].pagos;
            for (let j = 0; j < pagos.length ; j++) {
                if (pagos[j].ID === pagoID) {
                    pagos.splice(j , 1);
                }
            }
        }
    }
}

//      Metodos de Usuario      //
export function getUsuarios(){
    return usuarios
}

export function getParticipantes(indicesUsuarios){
    let v =[]; 
    for (let i = 0; i < indicesUsuarios.length; i++){
        v.push(usuarios[indicesUsuarios[i]]);
    }
    return v;
}

export function agregarParticipante (proyectoID, participanteID) {
    if(proyectoID >= 0 && proyectoID < proyectos.length){
        let participantes = proyectos[proyectoID].participantes

        if (!participantes.includes(participanteID)){
            participantes.push(participanteID)
        }
    }
}

export function agregarUsuario (UsuarioJason) {
    usuarios.push(UsuarioJason);
}

let UsuarioLogeado = "";

export function setUsuarioLogeado(newUsuario) {
    UsuarioLogeado = newUsuario;
}

export function getUsuarioLogeado() {
    return UsuarioLogeado;
}

export function getUsuaruiByID(ID){
    for (let i=0; i<usuarios.length; i++) {
        if(ID === usuarios[i].ID){
            return usuarios[i]
        }
    }
}

